<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<style>
body{
  display: table;
  margin: auto;
  text-align:center;
}
</style>
</head>

<body>
  <h2>Kingdom</h2>
  <div id="container">
<table>
  <thead>
    <tr>
      <th class="firstName">Name</th>
      <th class="lastName">Surname</th>
      <th>Date of Birth</th>
      <th class="function">Work as</th>
      <th>Experience</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

  </div>

<script>

var records = [];
var sortKey = 'firstName';

function renderTable() { //pojedyncze renderowanie tablicy
  var table = '';
  for (x in records) {
      table += "<tr><td>" +  records[x].firstName + "<td>" + records[x].lastName +"<td>" + records[x].dateOfBirth
      + "<td>" + records[x].function + "<td>" + records[x].experience + "</td></tr>";
  };
  $('#container tbody').empty().html(table);//empty - czyszcze wrzucam inner html
}


function sortByString(a, b){ //sortujemy w srodku records(json)
  return ((a[sortKey] < b[sortKey]) ? -1 : ((a[sortKey] > b[sortKey]) ? 1:0));
}

$('th.firstName').click(function() {
  sortKey = 'firstName';
  records.sort(sortByString);
  renderTable();
});

$('th.lastName').click(function() {
  sortKey = 'lastName';
  records.sort(sortByString);
  renderTable();
});

$('th.function').click(function() {
  sortKey = 'function';
  records.sort(sortByString);
  renderTable();
});

var obj, dbParam, xmlhttp, myObj, x, table = "";
obj = {};
dbParam = JSON.stringify(obj);
xmlhttp = new XMLHttpRequest();

xmlhttp.open("GET", 'https://raw.githubusercontent.com/mglabinski/beast/master/danee.json', true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.send("x=" + dbParam);

xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        records = JSON.parse(this.responseText);
        renderTable();
        // console.log(table);
}};
</script>

</body>
</html>
